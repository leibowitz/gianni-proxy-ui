{% extends "default.html" %}
{% block stylesheets %}
<link rel="stylesheet" href="/static/toggle-switch.css" type="text/css" />
{% end %}
{% block title %}Edit an existing message{% end %}
{% block content %}

  <div id="layout">

    <div id="main">
<div class="content">
    <a class="pure-button" href="/messages?{% if item is not None %}&amp;item={{ item }}{% end %}{% if origin %}&amp;origin={{ url_escape(origin) }}{% end %}{% if host is not None %}&amp;host={{ host }}{% end %}">Messages list</a>
  {% if item is not None %}
    <a class="pure-button" href="/item/{{ item }}?{% if origin %}&amp;origin={{ url_escape(origin) }}{% end %}{% if host is not None %}&amp;host={{ host }}{% end %}">Back to Request</a>
  {% end %}
  <h1 class="content-subhead">Edit Message</h1>
  <form class="pure-form" method="post">
    <input type="hidden" name="id" value="{{ entry['_id'] }}" />

    <h2>Message</h2>

    <div class="pure-form-aligned">
        
    <div class="pure-control-group">
    <label for="host">Host</label>
    <input type="text" name="host" size="35" placeholder="google.com" value="{% if entry['host'] != False %}{{ entry['host'] }}{% end %}" />
    </div>

    <div class="pure-control-group">
    <label for="body">Content</label>
    <textarea rows="10" style="width:100%" data-editor="" name="body" placeholder="Text">{% if entry['message'] %}{{ entry['message'] }}{% end %}</textarea>
    </div>

    </div>

    {% if 'rules' in entry and len(entry['rules']) != 0 %}
    <h2>Rules</h2>
    {% for rule, state in entry['rules'].iteritems() %}
    <label><input type="checkbox" name="rule-{{ rule }}" {% if state %}checked="checked"{% end %} /> </label><input type="text" value="{{ rule }}" />
<!--
<label class="switch-light switch-candy" onclick="">
    <input type="checkbox" {% if state %}checked="checked"{% end %}>
    <span>
        Enabled
        <span>False</span>
        <span>True</span>
    </span>

    <a></a>
</label>
-->
        <br/>
    {% end %}
    {% end %}
    
    <button type="submit" class="pure-button pure-button-primary">Update</button>
  </form>
  {% if tryagain %}
    Try again
  {% end %}

</div>
</div>
</div>

<script src="/static/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js" type="text/javascript"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ext-modelist.js" type="text/javascript"></script>
<script src="/static/jquery-ui.js"></script>
<script src="/static/editor.js"></script>
{% end %}
