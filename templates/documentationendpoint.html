{% block stylesheets %}
<link href="/static/default.css" media="all" rel="stylesheet" type="text/css" />
{% end %}
<div class="doc-view">

<h1 class="center no-margin">Request</h1>

<h3 class="no-top-padding no-top-margin">Headers</h3>

<table class="headers full-width">
{% for num, key in enumerate(entry['request']['headers']) %}
  <tr {% if num % 2 == 0 %}class="stripped"{% end %}>
    <td class="key">
  {{ key }}
    </td>
    <td class="table-header-value">
  {% if key == 'Cookie' %}
    {% raw entry['request']['headers'][key] %}
  {% else %}
    {{ entry['request']['headers'][key] }}
  {% end %}
    </td>
  </tr>
{% end %}
</table>


{% if entry and entry['request']['query'] and len(entry['request']['query']) != 0 %}
<h3>Query String</h3>

<table class="headers full-width">
{% for num, (key, value) in enumerate(entry['request']['query']) %}
  <tr {% if num % 2 == 0 %}class="stripped"{% end %}>
    <td class="key">
  {{ key }}
    </td>
    <td class="table-header-value">
    {{ value }}
    </td>
  </tr>
{% end %}
</table>
{% end %}

{% if entry and entry['request']['body'] %}
<h3>Body</h3>

<table class="headers full-width">
{% for num, (key, value) in enumerate(entry['request']['body'] ) %}
  <tr {% if num % 2 == 0 %}class="stripped"{% end %}>
    <td class="key">
  {{ key }}
    </td>
    <td class="table-header-value">
    {{ value }}
    </td>
  </tr>
{% end %}
</table>

{% end %}
<h1 class="center">Response</h1>

{% if entry and entry['response']['headers'] %}
<h3 class="no-top-padding no-top-margin">Headers</h3>

<table class="headers full-width">
{% for num, key in enumerate(entry['response']['headers']) %}
  <tr {% if num % 2 == 0 %}class="stripped"{% end %}>
    <td class="key">
  {{ key }}
    </td>
    <td class="table-header-value">
  {% if key == 'Cookie' %}
    {% raw entry['response']['headers'][key] %}
  {% else %}
    {{ entry['response']['headers'][key] }}
  {% end %}
    </td>
  </tr>
{% end %}
</table>

{% end %}

<ul class="statuses">
{% for item in entries %}
{% if 'schema' in item['response'] %}
<a class="response-status" data-target="{{ item['response']['status'] }}">
<span class="status-{{ (item['response']['status']/100)*100 }}">{{ item['response']['status'] }}</span>
</a>
{% end %}
{% end %}
</ul>

{% for key, item in enumerate(entries) %}
<ul class="content-schema" id="response-title-{{ item['response']['status'] }}" {% if key != 0 %}style="display: none;"{% end %}>
{% if 'schema' in item['response'] %}
<li><a class="response-content" data-target="response-content-{{ item['response']['status'] }}-json">JSON schema</a>
</li>
{% end %}
<li>
<a class="response-content" data-target="response-content-{{ item['response']['status'] }}-body">Example</a>
</li>
</ul>
{% end %}

{% for key, item in enumerate(entries) %}
<div class="content-schema box" id="response-content-{{ item['response']['status'] }}" {% if key != 0 %}style="display: none;"{% end %}>
  <span class="top-right">
  <a class="pure-button" href="/documentation/view/{{ item['_id'] }}">View</a>
  </span>
<ul class="list-content">
{% if 'schema' in item['response'] %}
<li id="response-content-{{ item['response']['status'] }}-json" class="response-content-data response-content-data-json">
<div>
{% raw render_schema(item['response']['schema']) %}
</div>
</li>
{% end %}
<li style="display: none;" id="response-content-{{ item['response']['status'] }}-body" class="response-content-data response-content-data-body">
  <div>

 {% raw item['response']['body'] %}
  </div>
</li>
</ul>
</div>
{% end %}
<script src="/static/jquery.min.js"></script>
<script type="text/javascript">
$('.response-status').on('click', function(evt){
  $('.content-schema').hide();
  $('.response-content-data').hide();
  $('#response-title-'+$(evt.currentTarget).data('target')).show();
  $('#response-content-'+$(evt.currentTarget).data('target')).show();
  $('#response-content-'+$(evt.currentTarget).data('target') + '-json' ).show();
});
$('.response-content').on('click', function(evt){
  $('.response-content-data').hide();
  $('#'+$(evt.currentTarget).data('target')).show();
});
</script>
</div>
